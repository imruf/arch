#!/bin/sh

case $BLOCK_BUTTON in
	3) notify-send "ğŸ”‹ Battery module" "ğŸ”‹: discharging
ğŸ›‘: not charging
â™»: stagnant charge
ğŸ”Œ: charging
âš¡: charged
â—: battery very low!
- Scroll to change adjust xbacklight." ;;
	4) xbacklight -inc 10 ;;
	5) xbacklight -dec 10 ;;
	6) "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

for battery in /sys/class/power_supply/BAT0
do

capacity=$(cat "$battery"/capacity 2>/dev/null) || break
	status=$(sed "s/[Dd]ischarging/ğŸ”‹/;s/[Nn]ot charging/ğŸ›‘/;s/[Cc]harging/ğŸ”Œ/;s/[Uu]nknown/â™»ï¸ /;s/[Ff]ull/âš¡/" "$battery"/status)

	bicon="$(sed "s/10[0-9]/ï‰€ /;s/9[0-9]/ï‰€ /;s/8[0-9]/ï‰€ /;s/7[0-9]/ï‰ /;s/6[0-9]/ï‰ /;s/5[0-9]/ï‰‚ /;s/4[0-9]/ï‰‚ /;s/3[0-9]/ï‰ƒ /;s/2[0-9]/ï‰ƒ /;s/1[0-9]/ï‰„ /;s/[0-9]/ï‰„ /" "$battery"/capacity)"
 
     [ "$capacity" -le 20 ] && [ "$status" = "ğŸ”‹" ] && dunstify -r 1010 -u normal "ğŸ”ŒBattery"

     [ "$capacity" == 100 ] && [ "$status" = "ğŸ›‘" ] && dunstify -r 1035 -u normal "âš¡Charged"

     [ "$capacity" -le 15 ] && [ "$status" = "ğŸ”‹" ] && slock $(sudo -A zzz)

	printf "%s%s%s" "$bicon ""$capacity%" " $status" 
 done | sed 's/ *$//'
